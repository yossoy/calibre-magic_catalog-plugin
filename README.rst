==================
Magic MOBI Catalog
==================

|date| yosssoy
==============

.. |date| date:: %Y/%m/%d

このプログラムは
-------------------
このプログラムは Calibre で *magic mobi catalog* を生成するためのプラグインです。

*magic mobi catalog* は通常の mobi カタログとは異なり書籍のダウンロードのためのリンクを持っています。
つまり、 ``.mobi`` や ``.azw`` のファイルであれば Kindle からカタログのリンクをクリックすることでダウンロードすることができます。

HTTP でファイルにアクセスできる Portable WIFI ストレージと組み合せて家の外で書籍をダウンロードする事を想定しています。
Portable WIFI ストレージに Calibre の Portable 版をインストールして、このプラグインをインスールしてカタログを生成／デバイス転送して、ストレージ中の本を読みたくなった時にカタログからファイルをダウンロードするような使い方です（というより、それ以外の使い途は無さそうな気がします)。

INSTALL
-------

*magic mobi Catalog* プラグインは公式のプラグインではありませんので、以下の手順でインストールす必要があります。

#. `calibre_magic_mobi_plugin.zip`_ をダウンロードする
#. HTTP アクセスできる場所にライブラリがある Calibre を起動する
#. Calibre のツールバー |config-button| から [オプション設定]を起動し、[高度な設定] の [プラグイン] に切り替える
#. [ファイルからプラグインを読み込む] ボタンを押下してファイルダイアログでダウンロードした calibre_magic_mobi_plugin.zip を選択する
#. 『プラグインのインストールには **セキュリティリスク** があります。〜』旨のメッセージボックスが表示されるが、[はい] を選択する
#. 『プラグイン **Catalog_MAGIC_MOBI** が **カタログ生成 プラグイン** としてインストールされました。プラグインを有効にするためにはcalibreを再起動してください。』というメッセージボックスが表示されるので、calibre を再起動する

.. _calibre_magic_mobi_plugin.zip : ./calibre_magic_mobi_plugin.zip
.. |config-button| image:: ./images/config.png

カタログの生成
----------------

*magic mobi catalog* の生成は以下の手順で行います。

#. Calibre のツールバー |convert-button| の右クリックメニューから [calibreライブラリの本からカタログを作成] を選択する
#. [カタログオプション] タブの [カタログフォーマット] のドロップダウンから [MOBI] を選択する。標準状態だと *Catalog_EPUB_MOBI* プラグインが有効になっているのでドロップダウンに [MOBI] の項目が 2 つ表示されているので、その場合は **下** の方を選択する
#. [電子書籍オプション] タブの [Library URL] を HTTP アクセスした場合のCalibreライブラリのURL を指定する
#. もし、カタログに含めたくない本があれば、[電子書籍オプション] タブの [Tag to exclude] で含めたくない本に指定されているタグを "," 区切りで入力する。
   指定した何れかのタグを持つ本はカタログから除外されます。
#. [OK] ボタンを押下するとカタログが生成される
   デバイスを接続している状態で、[カタログオプション] の [デバイスにカタログを自動的に送信する] が ON の状態で生成すると、生成完了後にデバイスに転送されます。

.. |convert-button| image:: ./images/convert.png

ライブラリにそこそこの本がある状態で生成すると結構な時間がかかります。

あと、上記のように [MOBI] が [カタログフォーマット] のドロップダウンに [MOBI] が二つ表示されるのを避けるには、標準の *Catalog_EPUB_MOBI* プラグインを無効化して下さい。ただし、 *magic mobi catalog* プラグインは mobi 形式のカタログしか生成できませんので、EPUB や azw3 形式のカタログが必要な方は下の方に毎回切り替えて下さい。

カタログの利用方法
--------------------
*magic mobi catalog* は以下の手順で利用します。

#. デバイスに転送した *magic mobi catalog* を開く
#. *magic mobi catalog* からダウンロードしたい本を探す
#. ページの "Download <<Fomrat>>" のリンクを選択するとブラウザが起動し、ファイルのダウンロードが開始する。




